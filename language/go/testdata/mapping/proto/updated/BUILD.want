load("//my/go:defs.bzl", "my_go_library")
load("//my/proto:defs.bzl", "my_go_proto_library", "my_proto_library")

my_proto_library(
    name = "updated_proto",
    srcs = [
        "bar.proto",
        "foo.proto",
    ],
    _gazelle_imports = [],
    visibility = ["//visibility:public"],
)

my_go_proto_library(
    name = "updated_go_proto",
    _gazelle_imports = [],
    importpath = "example.com/repo/mapping/proto/updated",
    proto = ":updated_proto",
    visibility = ["//visibility:public"],
)

my_go_library(
    name = "updated",
    srcs = [
        "extra.go",
        "other_extra.go",
    ],
    _gazelle_imports = [],
    embed = [":updated_go_proto"],
    importpath = "example.com/repo/mapping/proto/updated",
    visibility = ["//visibility:public"],
)
